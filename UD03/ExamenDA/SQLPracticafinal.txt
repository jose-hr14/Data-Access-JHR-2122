-- Table: public.course

-- DROP TABLE public.course;

CREATE TABLE IF NOT EXISTS public.course
(
    code integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    name character varying COLLATE pg_catalog."default",
    CONSTRAINT course_pkey PRIMARY KEY (code)
)

TABLESPACE pg_default;

ALTER TABLE public.course
    OWNER to postgres;

-- Table: public.enrollment

-- DROP TABLE public.enrollment;

CREATE TABLE IF NOT EXISTS public.enrollment
(
    code integer NOT NULL DEFAULT nextval('enrollment_code_seq'::regclass),
    student integer,
    course integer,
    CONSTRAINT enrollment_pkey PRIMARY KEY (code),
    CONSTRAINT fk_studentid FOREIGN KEY (student)
        REFERENCES public.student (idcard) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
)

TABLESPACE pg_default;

ALTER TABLE public.enrollment
    OWNER to postgres;

-- Table: public.scores

-- DROP TABLE public.scores;

CREATE TABLE IF NOT EXISTS public.scores
(
    enrollmentid integer NOT NULL,
    subjectid integer NOT NULL,
    score integer,
    CONSTRAINT scores_pkey PRIMARY KEY (enrollmentid, subjectid),
    CONSTRAINT fk_enrollmentid FOREIGN KEY (enrollmentid)
        REFERENCES public.enrollment (code) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION,
    CONSTRAINT fk_subjectid FOREIGN KEY (subjectid)
        REFERENCES public.subjects (code) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
)

TABLESPACE pg_default;

ALTER TABLE public.scores
    OWNER to postgres;
-- Table: public.student

-- DROP TABLE public.student;

CREATE TABLE IF NOT EXISTS public.student
(
    firstname character varying(50) COLLATE pg_catalog."default",
    lastname character varying(50) COLLATE pg_catalog."default",
    idcard integer NOT NULL,
    email character varying(50) COLLATE pg_catalog."default",
    phone character varying(50) COLLATE pg_catalog."default",
    CONSTRAINT student_pkey PRIMARY KEY (idcard)
)

TABLESPACE pg_default;

ALTER TABLE public.student
    OWNER to postgres;

-- Table: public.subjects

-- DROP TABLE public.subjects;

CREATE TABLE IF NOT EXISTS public.subjects
(
    code integer NOT NULL DEFAULT nextval('subjects_code_seq'::regclass),
    name character varying(50) COLLATE pg_catalog."default",
    courseid integer,
    hours integer,
    year integer,
    CONSTRAINT subjects_pkey PRIMARY KEY (code),
    CONSTRAINT fk_courseid FOREIGN KEY (courseid)
        REFERENCES public.course (code) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
        NOT VALID
)

TABLESPACE pg_default;

ALTER TABLE public.subjects
    OWNER to postgres;